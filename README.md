# DES 加密与解密程序

## 概述
本项目实现了 **数据加密标准（DES）** 算法，用于加密和解密文本文件。用户可以通过输入明文与密钥生成密文，或通过输入密文与密钥还原明文。此外，程序集成了 Base64 编码功能，以保证加密后的密文在文本文件中的可读性。

## 目录
- [DES 原理](#des-原理)
- [项目结构](#项目结构)
- [主要功能](#主要功能)
- [如何使用](#如何使用)
- [示例](#示例)
- [注意事项](#注意事项)

## DES 原理

### 什么是 DES？
**数据加密标准 (DES)** 是一种对称加密算法，它使用 64 位的密钥对 64 位的明文分组进行加密。它的工作流程分为以下步骤：
1. **初始置换 (IP)**：将明文分组进行初始排列。
2. **16 轮加密处理**：
   - 将输入分为左右两部分：左侧 (L) 和右侧 (R)。
   - 每一轮处理：使用密钥进行扩展置换、S 盒代替、P 盒置换。
   - 执行异或操作和交换 L 和 R。
3. **逆初始置换 (IP-1)**：在完成 16 轮处理后，将结果进行逆置换得到最终的密文。

### 基本步骤
- DES 的密钥长度为 64 位，其中 8 位用于奇偶校验。
- 每一轮使用一个不同的 48 位子密钥，这些密钥通过对主密钥的置换和移位生成。
- 使用相同的密钥进行加密和解密（对称加密）。

## 项目结构
- `DES_BOX.py`: 包含 DES 算法中常用的置换表和 S 盒等定义。
- `DES_Python.py`: 包含核心加密解密逻辑及文件读写操作的程序。

## 主要功能

### 文件读写
- `read_file(filename)`: 读取指定的文本文件内容。
- `write_file(message)`: 将密文写入 `ciphertext.txt` 文件中。

### Base64 编码与解码
- `base64_encode(bit_string)`: 将二进制字符串转换为 Base64 编码。
- `base64_decode(encoded_string)`: 将 Base64 编码还原为二进制字符串。

### 密钥与明文处理
- `process_key(key)`: 处理用户输入的密钥，生成 64 位密钥（含奇偶校验位）。
- `str_bit(message)`: 将明文字符串转化为二进制字符串。
- `divide(bits, bit)`: 将二进制流按照指定位数进行分组处理。

### DES 加密与解密核心流程
- `generate_key(key)`: 根据主密钥生成 16 轮子密钥。
- `des_encrypt(bits, key)`: 对 64 位的明文块进行加密，返回密文块。
- `des_decrypt(bits, key)`: 对 64 位的密文块进行解密，返回明文块。
- `all_des_encrypt(message, key)`: 对整段明文进行加密，并返回完整的加密结果。
- `all_des_decrypt(message, key)`: 对整段密文进行解密，并返回解密后的明文。

## 如何使用

### 环境要求
- Python 3.x
- 需安装 `base64` 库 （标准库，无需单独安装）

### 步骤
1. 将你要加密的明文保存在 `plaintext.txt` 文件中。
2. 运行程序，选择加密或解密操作：
   - 输入 `1` 进行加密，系统会提示输入密钥，并生成加密后的 Base64 格式密文，保存至 `ciphertext.txt`。
   - 输入 `2` 进行解密，系统会提示输入密钥，并将密文解密为明文。
   - 输入 `3` 退出程序。

### 运行命令
```bash
python DES_Python.py
```

## 示例

### 加密示例
1. 将以下文本保存为 `plaintext.txt`：
   ```
   Hello, DES Encryption!
   ```
2. 运行程序并选择加密：
   ```
   Encrypt press 1   Decrypt press 2   Exit press 3 : 1
   Input the password you want to set: mysecretkey
   ```
   结果输出加密后的 Base64 密文，并保存在 `ciphertext.txt` 中。

### 解密示例
1. 运行程序并选择解密：
   ```
   Encrypt press 1   Decrypt press 2   Exit press 3 : 2
   Input your password: mysecretkey
   ```
   结果输出解密后的明文内容。

## 注意事项
- 密钥长度应为 8 个字符（64 位），程序会自动进行奇偶校验位的处理。
- 明文长度不是 64 位的倍数时，程序会自动填充 0 以保证分组完整性。
- 使用与加密时相同的密钥进行解密，否则解密无法正确还原明文。
```

